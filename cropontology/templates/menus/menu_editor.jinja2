{% extends 'page.jinja2' %}

{% block breadcrums %}
    {% include 'menus/snippets/breadcrums_menu.jinja2' %}
{% endblock breadcrums %}

{% block main_container %}
<div class="row">
    <div class="col-lg-6">
        <div class="card">
            <div class="card-body table-responsive p-0" style="height: 300px;">
                <ul id="myEditor" class="sortableLists list-group">
                </ul>
            </div>
            <div class="card-footer">
                <button type="button" id="btnSaveMenu" class="btn btn-primary"><i class="fas fa-sync-alt"></i>{{ _('Save menu') }}</button>
            </div>
        </div>
    </div>
    <div class="col-lg-6">
        <div class="card">
            <div class="card-body table-responsive p-0" style="height: 300px;">
                <form id="frmEdit" class="form-horizontal">
                    <div class="form-group">
                        <label for="text">{{ _('Text') }}</label>
                        <div class="input-group">
                            <input type="text" class="form-control item-menu" name="text" id="text" placeholder="{{ _('Text') }}">
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="href">{{ _('URL') }}</label>
                        <input type="text" class="form-control item-menu" id="href" name="href" placeholder="{{ _('URL') }}">
                    </div>
                    <div class="form-group">
                        <label for="target">{{ _('Target') }}</label>
                        <select name="target" id="target" class="form-control item-menu">
                            <option value="_self">{{ _('Self') }}</option>
                            <option value="_blank">{{ _('Blank') }}</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="card-footer">
                <button type="button" id="btnUpdate" class="btn btn-primary" disabled><i class="fas fa-sync-alt"></i>{{ _('Update') }}</button>
                <button type="button" id="btnAdd" class="btn btn-success"><i class="fas fa-plus"></i>{{ _('Add') }}</button>
            </div>
        </div>
    </div>
</div>
{% endblock main_container %}

{% block scripts %}
    {{ super() }}
    {% jsresource request,'main_library','menu_editor' %}
    <script>
        $(document).ready(function() {
            var editor = new MenuEditor('myEditor',
                {
                    listOptions: sortableListOptions,
                    maxLevel: 2 // (Optional) Default is -1 (no level limit)
                    // Valid levels are from [0, 1, 2, 3,...N]
                });
            editor.setForm($('#frmEdit'));
            editor.setUpdateButton($('#btnUpdate'));
//Calling the update method
            $("#btnUpdate").click(function(){
                editor.update();
            });
// Calling the add method
            $('#btnAdd').click(function(){
                editor.add();
            });
        })
    </script>
{% endblock scripts %}